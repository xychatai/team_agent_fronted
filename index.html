<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å›¢é˜Ÿé‚€è¯·ç³»ç»Ÿ - ç”¨æˆ·ç«¯</title>
    <link href="https://cdn.jsdelivr.net/npm/element-plus@2.3.7/dist/index.css" rel="stylesheet">
    <link rel="stylesheet" href="assets/css/style.css">
</head>
<body>
    <div id="app">
        <div class="header">
            <h1>å›¢é˜Ÿé‚€è¯·ç³»ç»Ÿ</h1>
            <p>è¶…è¶Šæƒ³è±¡ï¼ŒGPT-5 Plusä¸ºä½ çš„è®¾è®¡ä¿®å›¾å¢æ·»æ— é™çµæ„Ÿï¼</p>
        </div>
        
        <div class="container">
            <el-tabs v-model="activeTab" class="tabs-container" @tab-change="handleTabChange">
                <!-- å…‘æ¢ç å…‘æ¢ -->
                <el-tab-pane name="redeem">
                    <template #label>
                        <div class="tab-label">
                            <el-icon><CreditCard /></el-icon>
                            <span>å…‘æ¢</span>
                        </div>
                    </template>
                    <div class="tab-content">
                        <div class="feature-card redeem-card">
                            <div class="card-header">
                                <div class="card-icon redeem-icon">
                                    <el-icon size="28"><CreditCard /></el-icon>
                                </div>
                                <div class="card-title">å…‘æ¢ç ä½¿ç”¨</div>
                                <div class="card-desc">è¶…è¶Šæƒ³è±¡ï¼ŒGPT-5 Plusä¸ºä½ çš„è®¾è®¡ä¿®å›¾å¢æ·»æ— é™çµæ„Ÿï¼</div>
                            </div>
                            <div class="card-body">
                                <el-form :model="redeemForm" :rules="redeemRules" ref="redeemFormRef" size="large">
                                    <el-form-item prop="code">
                                        <el-input 
                                            v-model="redeemForm.code" 
                                            placeholder="è¯·è¾“å…¥æ‚¨çš„å…‘æ¢ç "
                                            class="input-field"
                                            clearable>
                                            <template #prefix>
                                                <el-icon><Ticket /></el-icon>
                                            </template>
                                        </el-input>
                                    </el-form-item>
                                    <el-form-item prop="email">
                                        <el-input 
                                            v-model="redeemForm.email" 
                                            placeholder="è¯·è¾“å…¥æ‚¨çš„é‚®ç®±åœ°å€"
                                            class="input-field"
                                            clearable>
                                            <template #prefix>
                                                <el-icon><User /></el-icon>
                                            </template>
                                        </el-input>
                                    </el-form-item>
                                    <el-form-item>
                                        <el-button 
                                            type="primary" 
                                            size="large"
                                            class="action-button"
                                            @click="handleRedeem"
                                            :loading="loading.redeem">
                                            <el-icon v-if="!loading.redeem"><Check /></el-icon>
                                            ç«‹å³å…‘æ¢
                                        </el-button>
                                    </el-form-item>
                                </el-form>
                                
                                <div v-if="redeemResult" :class="['result-panel', redeemResult.success ? 'success-panel' : 'error-panel']">
                                    <div v-if="redeemResult.success" class="success-content">
                                        <div class="result-icon">
                                            <el-icon size="48" color="#67c23a"><SuccessFilled /></el-icon>
                                        </div>
                                        <div class="result-title">å…‘æ¢æˆåŠŸï¼</div>
                                        <div class="result-message" v-text="redeemResult.message"></div>
                                        <div v-if="redeemResult.bind_type === 'warranty'" class="warranty-info">
                                            <el-tag type="warning" size="large">
                                                è´¨ä¿æœŸï¼š<span v-text="redeemResult.warranty_days"></span>å¤©
                                            </el-tag>
                                        </div>
                                        <div class="next-step">
                                            <strong>ğŸ“§ è¯·æ£€æŸ¥æ‚¨çš„é‚®ç®±å¹¶æ¥å—å›¢é˜Ÿé‚€è¯·</strong>
                                        </div>
                                    </div>
                                    <div v-else class="error-content">
                                        <div class="result-icon">
                                            <el-icon size="48" color="#f56c6c"><CircleCloseFilled /></el-icon>
                                        </div>
                                        <div class="result-title">å…‘æ¢å¤±è´¥</div>
                                        <div class="result-message" v-text="redeemResult.error"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </el-tab-pane>
                
                <!-- æ‰¹é‡å…‘æ¢ -->
                <el-tab-pane name="batch">
                    <template #label>
                        <div class="tab-label">
                            <el-icon><List /></el-icon>
                            <span>æ‰¹é‡å…‘æ¢</span>
                        </div>
                    </template>
                    <div class="tab-content">
                        <div class="feature-card batch-card">
                            <div class="card-header">
                                <div class="card-icon batch-icon">
                                    <el-icon size="28"><List /></el-icon>
                                </div>
                                <div class="card-title">æ‰¹é‡å…‘æ¢ç ä½¿ç”¨</div>
                                <div class="card-desc">ä¸€æ¬¡æ€§å¤„ç†å¤šä¸ªé‚®ç®±å’Œå…‘æ¢ç ï¼Œæ”¯æŒè¿›åº¦è·Ÿè¸ª</div>
                            </div>
                            <div class="card-body">
                                <div class="batch-input-section">
                                    <el-row :gutter="20">
                                        <el-col :span="12">
                                            <div class="input-group">
                                                <div class="input-label">
                                                    <el-icon><User /></el-icon>
                                                    <span>é‚®ç®±åˆ—è¡¨ï¼ˆæ¯è¡Œä¸€ä¸ªï¼‰</span>
                                                    <span class="count-badge" v-if="batchForm.emailList.length > 0">{{ batchForm.emailList.length }}</span>
                                                </div>
                                                <el-input
                                                    v-model="batchForm.emails"
                                                    type="textarea"
                                                    :rows="8"
                                                    placeholder="è¯·è¾“å…¥é‚®ç®±åœ°å€ï¼Œæ¯è¡Œä¸€ä¸ª&#10;ä¾‹å¦‚ï¼š&#10;user1@example.com&#10;user2@example.com&#10;user3@example.com"
                                                    class="batch-textarea"
                                                    @input="validateBatchInput">
                                                </el-input>
                                            </div>
                                        </el-col>
                                        <el-col :span="12">
                                            <div class="input-group">
                                                <div class="input-label">
                                                    <el-icon><Ticket /></el-icon>
                                                    <span>å…‘æ¢ç åˆ—è¡¨ï¼ˆæ¯è¡Œä¸€ä¸ªï¼‰</span>
                                                    <span class="count-badge" v-if="batchForm.codeList.length > 0">{{ batchForm.codeList.length }}</span>
                                                </div>
                                                <el-input
                                                    v-model="batchForm.codes"
                                                    type="textarea"
                                                    :rows="8"
                                                    placeholder="è¯·è¾“å…¥å…‘æ¢ç ï¼Œæ¯è¡Œä¸€ä¸ª&#10;ä¾‹å¦‚ï¼š&#10;CODE123456&#10;CODE789012&#10;CODE345678"
                                                    class="batch-textarea"
                                                    @input="validateBatchInput">
                                                </el-input>
                                            </div>
                                        </el-col>
                                    </el-row>
                                </div>
                                
                                <div v-if="batchValidation.message" class="validation-message">
                                    <el-alert 
                                        :type="batchValidation.type" 
                                        :closable="false" 
                                        show-icon>
                                        {{ batchValidation.message }}
                                    </el-alert>
                                </div>
                                
                                <div class="batch-actions">
                                    <el-button 
                                        type="primary" 
                                        size="large"
                                        class="action-button"
                                        @click="handleBatchRedeem"
                                        :disabled="!batchValidation.isValid || loading.batch"
                                        :loading="loading.batch">
                                        <el-icon v-if="!loading.batch"><Checked /></el-icon>
                                        å¼€å§‹æ‰¹é‡å…‘æ¢
                                    </el-button>
                                    <el-button 
                                        v-if="batchProgress.total > 0"
                                        size="large"
                                        @click="clearBatchResults">
                                        <el-icon><Delete /></el-icon>
                                        æ¸…ç©ºç»“æœ
                                    </el-button>
                                </div>
                                
                                <div v-if="batchProgress.total > 0" class="batch-progress-section">
                                    <div class="progress-header">
                                        <h3>å¤„ç†è¿›åº¦</h3>
                                        <div class="progress-stats">
                                            <el-tag type="info">æ€»è®¡: {{ batchProgress.total }}</el-tag>
                                            <el-tag type="success">æˆåŠŸ: {{ batchProgress.success }}</el-tag>
                                            <el-tag type="danger">å¤±è´¥: {{ batchProgress.failed }}</el-tag>
                                            <el-tag type="warning">ç­‰å¾…: {{ batchProgress.pending }}</el-tag>
                                        </div>
                                    </div>
                                    
                                    <el-progress 
                                        :percentage="batchProgress.percentage" 
                                        :status="batchProgress.percentage === 100 ? 'success' : undefined"
                                        :stroke-width="8"
                                        class="batch-progress-bar">
                                    </el-progress>
                                    
                                    <div class="batch-results">
                                        <div v-for="(result, index) in batchResults" :key="index" class="result-item">
                                            <div class="result-info">
                                                <span class="result-index">{{ index + 1 }}.</span>
                                                <span class="result-email">{{ result.email }}</span>
                                                <span class="result-code">{{ result.code }}</span>
                                            </div>
                                            <div class="result-status">
                                                <el-tag 
                                                    :type="result.status === 'success' ? 'success' : result.status === 'failed' ? 'danger' : 'info'"
                                                    :class="result.status">
                                                    <el-icon v-if="result.status === 'success'"><SuccessFilled /></el-icon>
                                                    <el-icon v-else-if="result.status === 'failed'"><CircleCloseFilled /></el-icon>
                                                    <el-icon v-else-if="result.status === 'processing'"><Loading /></el-icon>
                                                    <el-icon v-else><Clock /></el-icon>
                                                    {{ result.statusText }}
                                                </el-tag>
                                            </div>
                                            <div v-if="result.message" class="result-message">
                                                {{ result.message }}
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </el-tab-pane>
                
                <!-- å›¢é˜Ÿæ¸…ç† -->
                <el-tab-pane name="cleanup">
                    <template #label>
                        <div class="tab-label">
                            <el-icon><Delete /></el-icon>
                            <span>å›¢é˜Ÿæ¸…ç†</span>
                        </div>
                    </template>
                    <div class="tab-content">
                        <div class="feature-card cleanup-card">
                            <div class="card-header">
                                <div class="card-icon cleanup-icon">
                                    <el-icon size="28"><Delete /></el-icon>
                                </div>
                                <div class="card-title">å›¢é˜Ÿæˆå‘˜æ¸…ç†</div>
                                <div class="card-desc">æ¸…ç†æ¯å·å›¢é˜Ÿä¸­çš„éç”¨æˆ·æˆå‘˜ï¼Œä¿æŠ¤å·²ç»‘å®šç”¨æˆ·</div>
                            </div>
                            <div class="card-body">
                                <el-form :model="cleanupForm" :rules="cleanupRules" ref="cleanupFormRef" size="large">
                                    <el-form-item prop="code">
                                        <el-input 
                                            v-model="cleanupForm.code" 
                                            placeholder="è¯·è¾“å…¥æ‚¨çš„å…‘æ¢ç "
                                            class="input-field"
                                            clearable>
                                            <template #prefix>
                                                <el-icon><Ticket /></el-icon>
                                            </template>
                                        </el-input>
                                    </el-form-item>
                                    <el-form-item>
                                        <el-button 
                                            type="warning" 
                                            size="large"
                                            class="action-button"
                                            @click="handleCleanupPreview"
                                            :loading="loading.cleanupPreview">
                                            <el-icon v-if="!loading.cleanupPreview"><View /></el-icon>
                                            é¢„è§ˆæ¸…ç†ç»“æœ
                                        </el-button>
                                    </el-form-item>
                                </el-form>
                                
                                <div v-if="cleanupPreviewResult" class="cleanup-preview-panel">
                                    <div v-if="cleanupPreviewResult.success" class="preview-content">
                                        <div class="preview-header">
                                            <div class="preview-icon">
                                                <el-icon size="48" color="#e6a23c"><InfoFilled /></el-icon>
                                            </div>
                                            <div class="preview-title">æ¸…ç†é¢„è§ˆç»“æœ</div>
                                            <div class="preview-subtitle">æ¯å·ï¼š{{ cleanupPreviewResult.mother_email }}</div>
                                        </div>
                                        
                                        <div class="cleanup-stats">
                                            <div class="stat-card total-card">
                                                <div class="stat-number">{{ cleanupPreviewResult.total_members }}</div>
                                                <div class="stat-label">æ€»æˆå‘˜æ•°</div>
                                            </div>
                                            <div class="stat-card delete-card">
                                                <div class="stat-number">{{ cleanupPreviewResult.will_delete_count }}</div>
                                                <div class="stat-label">å°†åˆ é™¤</div>
                                            </div>
                                            <div class="stat-card keep-card">
                                                <div class="stat-number">{{ cleanupPreviewResult.will_keep_count }}</div>
                                                <div class="stat-label">å°†ä¿ç•™</div>
                                            </div>
                                        </div>
                                        
                                        <div class="members-lists">
                                            <div class="members-section will-delete">
                                                <h4>å°†åˆ é™¤çš„æˆå‘˜ ({{ cleanupPreviewResult.will_delete_count }}ä¸ª)</h4>
                                                <div v-if="cleanupPreviewResult.will_delete.length > 0" class="member-list">
                                                    <div v-for="email in cleanupPreviewResult.will_delete" :key="email" class="member-item delete-item">
                                                        <el-icon><Close /></el-icon>
                                                        <span>{{ email }}</span>
                                                    </div>
                                                </div>
                                                <div v-else class="empty-list">æ— éœ€åˆ é™¤çš„æˆå‘˜</div>
                                            </div>
                                            
                                            <div class="members-section will-keep">
                                                <h4>å°†ä¿ç•™çš„æˆå‘˜ ({{ cleanupPreviewResult.will_keep_count }}ä¸ª)</h4>
                                                <div v-if="cleanupPreviewResult.will_keep.length > 0" class="member-list">
                                                    <div v-for="email in cleanupPreviewResult.will_keep" :key="email" class="member-item keep-item">
                                                        <el-icon><Check /></el-icon>
                                                        <span>{{ email }}</span>
                                                    </div>
                                                </div>
                                                <div v-else class="empty-list">æ— ä¿ç•™æˆå‘˜</div>
                                            </div>
                                        </div>
                                        
                                        <div class="cleanup-actions">
                                            <el-button 
                                                type="danger" 
                                                size="large"
                                                class="execute-button"
                                                @click="handleCleanupExecute"
                                                :loading="loading.cleanupExecute">
                                                <el-icon v-if="!loading.cleanupExecute"><Delete /></el-icon>
                                                ç¡®è®¤æ‰§è¡Œæ¸…ç†
                                            </el-button>
                                            <div class="warning-text">
                                                <el-alert 
                                                    type="warning" 
                                                    :closable="false"
                                                    show-icon>
                                                    âš ï¸ æ­¤æ“ä½œä¸å¯æ’¤é”€ï¼Œè¯·ä»”ç»†ç¡®è®¤æ¸…ç†èŒƒå›´
                                                </el-alert>
                                            </div>
                                        </div>
                                    </div>
                                    <div v-else class="error-content">
                                        <div class="result-icon">
                                            <el-icon size="48" color="#f56c6c"><CircleCloseFilled /></el-icon>
                                        </div>
                                        <div class="result-title">é¢„è§ˆå¤±è´¥</div>
                                        <div class="result-message" v-text="cleanupPreviewResult.error"></div>
                                    </div>
                                </div>
                                
                                <div v-if="cleanupExecuteResult" :class="['result-panel', cleanupExecuteResult.success ? 'success-panel' : 'error-panel']">
                                    <div v-if="cleanupExecuteResult.success" class="success-content">
                                        <div class="result-icon">
                                            <el-icon size="48" color="#67c23a"><SuccessFilled /></el-icon>
                                        </div>
                                        <div class="result-title">æ¸…ç†å®Œæˆï¼</div>
                                        <div class="cleanup-summary">
                                            <div class="summary-stats">
                                                <div class="summary-item">
                                                    <span class="label">åˆ é™¤æˆåŠŸï¼š</span>
                                                    <span class="value success">{{ cleanupExecuteResult.deleted_count }}ä¸ª</span>
                                                </div>
                                                <div class="summary-item" v-if="cleanupExecuteResult.failed_count > 0">
                                                    <span class="label">åˆ é™¤å¤±è´¥ï¼š</span>
                                                    <span class="value failed">{{ cleanupExecuteResult.failed_count }}ä¸ª</span>
                                                </div>
                                            </div>
                                            
                                            <div v-if="cleanupExecuteResult.deleted_emails.length > 0" class="deleted-list">
                                                <h5>å·²åˆ é™¤çš„æˆå‘˜ï¼š</h5>
                                                <div class="email-list">
                                                    <div v-for="email in cleanupExecuteResult.deleted_emails" :key="email" class="email-item deleted">
                                                        <el-icon><Check /></el-icon>
                                                        <span>{{ email }}</span>
                                                    </div>
                                                </div>
                                            </div>
                                            
                                            <div v-if="cleanupExecuteResult.failed_deletions && cleanupExecuteResult.failed_deletions.length > 0" class="failed-list">
                                                <h5>åˆ é™¤å¤±è´¥çš„æˆå‘˜ï¼š</h5>
                                                <div class="failed-items">
                                                    <div v-for="failure in cleanupExecuteResult.failed_deletions" :key="failure.email" class="failed-item">
                                                        <div class="failed-email">{{ failure.email }}</div>
                                                        <div class="failed-reason">{{ failure.error }}</div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div v-else class="error-content">
                                        <div class="result-icon">
                                            <el-icon size="48" color="#f56c6c"><CircleCloseFilled /></el-icon>
                                        </div>
                                        <div class="result-title">æ¸…ç†å¤±è´¥</div>
                                        <div class="result-message" v-text="cleanupExecuteResult.error"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </el-tab-pane>
                
                <!-- è§£ç»‘åŠŸèƒ½ -->
                <el-tab-pane name="unbind">
                    <template #label>
                        <div class="tab-label">
                            <el-icon><Connection /></el-icon>
                            <span>è§£ç»‘</span>
                        </div>
                    </template>
                    <div class="tab-content">
                        <div class="feature-card unbind-card">
                            <div class="card-header">
                                <div class="card-icon unbind-icon">
                                    <el-icon size="28"><Connection /></el-icon>
                                </div>
                                <div class="card-title">è§£ç»‘ç®¡ç†</div>
                                <div class="card-desc">è§£ç»‘å½“å‰å…‘æ¢ç ï¼Œé‡Šæ”¾é‡å¤ä½¿ç”¨èµ„æ ¼</div>
                            </div>
                            <div class="card-body">
                                <!-- åˆ‡æ¢æ¨¡å¼çš„æ ‡ç­¾é¡µ -->
                                <el-tabs v-model="unbindMode" type="card" class="unbind-tabs">
                                    <el-tab-pane label="å•ä¸ªè§£ç»‘" name="single">
                                        <el-form :model="unbindForm" :rules="unbindRules" ref="unbindFormRef" size="large">
                                            <el-form-item prop="code">
                                                <el-input 
                                                    v-model="unbindForm.code" 
                                                    placeholder="è¯·è¾“å…¥æ‚¨çš„å…‘æ¢ç "
                                                    class="input-field"
                                                    clearable>
                                                    <template #prefix>
                                                        <el-icon><Ticket /></el-icon>
                                                    </template>
                                                </el-input>
                                            </el-form-item>
                                            <el-form-item>
                                                <el-button 
                                                    type="warning" 
                                                    size="large"
                                                    class="action-button"
                                                    @click="handleUnbindConfirm"
                                                    :loading="loading.unbindConfirm">
                                                    <el-icon v-if="!loading.unbindConfirm"><InfoFilled /></el-icon>
                                                    è·å–è§£ç»‘ç¡®è®¤ä¿¡æ¯
                                                </el-button>
                                            </el-form-item>
                                        </el-form>
                                        
                                        <!-- è§£ç»‘ç¡®è®¤ä¿¡æ¯é¢æ¿ -->
                                        <div v-if="unbindConfirmation && unbindConfirmation.success" class="confirmation-panel">
                                            <div class="confirmation-header">
                                                <div class="confirmation-icon">
                                                    <el-icon size="48" color="#e6a23c"><WarningFilled /></el-icon>
                                                </div>
                                                <div class="confirmation-title">è§£ç»‘ç¡®è®¤ä¿¡æ¯</div>
                                            </div>
                                            <div class="confirmation-content">
                                                <el-descriptions :column="1" border size="large">
                                                    <el-descriptions-item label="ç”¨æˆ·é‚®ç®±">
                                                        <code class="masked-email">{{ unbindConfirmation.confirmation_info.masked_email }}</code>
                                                    </el-descriptions-item>
                                                    <el-descriptions-item label="å…‘æ¢ç ">
                                                        <code class="code-display">{{ unbindConfirmation.confirmation_info.redemption_code }}</code>
                                                    </el-descriptions-item>
                                                    <el-descriptions-item label="æ¯å·é‚®ç®±">
                                                        <span>{{ unbindConfirmation.confirmation_info.mother_email }}</span>
                                                    </el-descriptions-item>
                                                    <el-descriptions-item label="ç»‘å®šç±»å‹">
                                                        <el-tag :type="unbindConfirmation.confirmation_info.bind_type === 'warranty' ? 'warning' : 'info'" size="large">
                                                            {{ unbindConfirmation.confirmation_info.bind_type === 'warranty' ? 'è´¨ä¿å‹' : 'ä¸€æ¬¡æ€§' }}
                                                        </el-tag>
                                                    </el-descriptions-item>
                                                    <el-descriptions-item label="ç»‘å®šæ—¶é—´">
                                                        <span>{{ unbindConfirmation.confirmation_info.created_at }}</span>
                                                    </el-descriptions-item>
                                                </el-descriptions>
                                                
                                                <div class="confirmation-warning">
                                                    <el-alert 
                                                        type="warning" 
                                                        :closable="false"
                                                        show-icon>
                                                        <template #default>
                                                            <strong>ç¡®è®¤æ‚¨è¦è§£ç»‘ä»¥ä¸Šç»‘å®šå—ï¼Ÿ</strong><br>
                                                            è§£ç»‘åï¼Œç”¨æˆ· <code>{{ unbindConfirmation.confirmation_info.masked_email }}</code> å°†é€€å‡ºå›¢é˜Ÿã€‚
                                                        </template>
                                                    </el-alert>
                                                </div>
                                                
                                                <div class="confirmation-actions">
                                                    <el-button 
                                                        type="danger" 
                                                        size="large"
                                                        class="confirm-unbind-button"
                                                        @click="handleConfirmedUnbind"
                                                        :loading="loading.unbind">
                                                        <el-icon v-if="!loading.unbind"><Minus /></el-icon>
                                                        ç¡®è®¤è§£ç»‘
                                                    </el-button>
                                                    <el-button 
                                                        size="large"
                                                        @click="unbindConfirmation = null">
                                                        å–æ¶ˆ
                                                    </el-button>
                                                </div>
                                            </div>
                                        </div>
                                        
                                    </el-tab-pane>
                                    
                                    <el-tab-pane label="æ‰¹é‡è§£ç»‘" name="batch">
                                        <div class="batch-unbind-section">
                                            <div class="input-group">
                                                <div class="input-label">
                                                    <el-icon><Ticket /></el-icon>
                                                    <span>å…‘æ¢ç åˆ—è¡¨ï¼ˆæ¯è¡Œä¸€ä¸ªï¼‰</span>
                                                    <span class="count-badge" v-if="batchUnbindForm.codeList.length > 0">{{ batchUnbindForm.codeList.length }}</span>
                                                </div>
                                                <el-input
                                                    v-model="batchUnbindForm.codes"
                                                    type="textarea"
                                                    :rows="6"
                                                    placeholder="è¯·è¾“å…¥è¦è§£ç»‘çš„å…‘æ¢ç ï¼Œæ¯è¡Œä¸€ä¸ª&#10;ä¾‹å¦‚ï¼š&#10;CODE123456&#10;CODE789012&#10;CODE345678"
                                                    class="batch-textarea"
                                                    @input="validateBatchUnbindInput">
                                                </el-input>
                                            </div>
                                            
                                            <div v-if="batchUnbindValidation.message" class="validation-message">
                                                <el-alert 
                                                    :type="batchUnbindValidation.type" 
                                                    :closable="false" 
                                                    show-icon>
                                                    {{ batchUnbindValidation.message }}
                                                </el-alert>
                                            </div>
                                            
                                            <div class="batch-actions">
                                                <el-button 
                                                    type="warning" 
                                                    size="large"
                                                    class="action-button"
                                                    @click="handleBatchCheckStatusByCode"
                                                    :disabled="!batchUnbindValidation.isValid || loading.batchUnbindCheck"
                                                    :loading="loading.batchUnbindCheck">
                                                    <el-icon v-if="!loading.batchUnbindCheck"><View /></el-icon>
                                                    æ‰¹é‡æŸ¥è¯¢ç»‘å®šçŠ¶æ€
                                                </el-button>
                                                <el-button 
                                                    v-if="batchUnbindResults.length > 0 && batchUnbindResults.some(r => r.canUnbind)"
                                                    type="danger" 
                                                    size="large"
                                                    class="unbind-button"
                                                    @click="handleBatchUnbind"
                                                    :loading="loading.batchUnbind">
                                                    <el-icon v-if="!loading.batchUnbind"><Minus /></el-icon>
                                                    æ‰¹é‡è§£ç»‘æ‰€æœ‰å¯è§£ç»‘é¡¹
                                                </el-button>
                                                <el-button 
                                                    v-if="batchUnbindProgress.total > 0"
                                                    size="large"
                                                    @click="clearBatchUnbindResults">
                                                    <el-icon><Delete /></el-icon>
                                                    æ¸…ç©ºç»“æœ
                                                </el-button>
                                            </div>
                                            
                                            <div v-if="batchUnbindProgress.total > 0" class="batch-progress-section">
                                                <div class="progress-header">
                                                    <h3>å¤„ç†è¿›åº¦</h3>
                                                    <div class="progress-stats">
                                                        <el-tag type="info">æ€»è®¡: {{ batchUnbindProgress.total }}</el-tag>
                                                        <el-tag type="success">æˆåŠŸ: {{ batchUnbindProgress.success }}</el-tag>
                                                        <el-tag type="danger">å¤±è´¥: {{ batchUnbindProgress.failed }}</el-tag>
                                                        <el-tag type="warning">ç­‰å¾…: {{ batchUnbindProgress.pending }}</el-tag>
                                                    </div>
                                                </div>
                                                
                                                <el-progress 
                                                    :percentage="batchUnbindProgress.percentage" 
                                                    :status="batchUnbindProgress.percentage === 100 ? 'success' : undefined"
                                                    :stroke-width="8"
                                                    class="batch-progress-bar">
                                                </el-progress>
                                                
                                                <div class="batch-results">
                                                    <div v-for="(result, index) in batchUnbindResults" :key="index" class="result-item unbind-result-item">
                                                        <div class="result-info">
                                                            <span class="result-index">{{ index + 1 }}.</span>
                                                            <span class="result-code">{{ result.code }}</span>
                                                            <span v-if="result.binding && result.binding.user_email" class="result-email">{{ maskEmail(result.binding.user_email) }}</span>
                                                        </div>
                                                        <div class="result-status">
                                                            <el-tag 
                                                                :type="getUnbindResultTagType(result)"
                                                                :class="result.status">
                                                                <el-icon v-if="result.status === 'success'"><SuccessFilled /></el-icon>
                                                                <el-icon v-else-if="result.status === 'failed'"><CircleCloseFilled /></el-icon>
                                                                <el-icon v-else-if="result.status === 'processing'"><Loading /></el-icon>
                                                                <el-icon v-else><Clock /></el-icon>
                                                                {{ result.statusText }}
                                                            </el-tag>
                                                        </div>
                                                        <div v-if="result.binding && result.status === 'checked'" class="binding-details">
                                                            <div class="binding-summary">
                                                                <el-tag :type="result.binding.type === 'warranty' ? 'warning' : 'info'" size="small">
                                                                    {{ result.binding.type === 'warranty' ? 'è´¨ä¿å‹' : 'ä¸€æ¬¡æ€§' }}
                                                                </el-tag>
                                                                <span class="mother-email">{{ result.binding.mother_email }}</span>
                                                            </div>
                                                        </div>
                                                        <div v-if="result.message" class="result-message">
                                                            {{ result.message }}
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </el-tab-pane>
                                </el-tabs>
                            </div>
                        </div>
                    </div>
                </el-tab-pane>
                
                <!-- ä½¿ç”¨è¯´æ˜ -->
                <el-tab-pane name="help">
                    <template #label>
                        <div class="tab-label">
                            <el-icon><InfoFilled /></el-icon>
                            <span>ä½¿ç”¨è¯´æ˜</span>
                        </div>
                    </template>
                    <div class="tab-content">
                        <div class="feature-card help-card">
                            <div class="card-header">
                                <div class="card-icon help-icon">
                                    <el-icon size="28"><InfoFilled /></el-icon>
                                </div>
                                <div class="card-title">ä½¿ç”¨è¯´æ˜</div>
                                <div class="card-desc">äº†è§£å¦‚ä½•ä½¿ç”¨å›¢é˜Ÿé‚€è¯·ç³»ç»Ÿ</div>
                            </div>
                            <div class="card-body">
                                <div v-if="loading.help" class="loading-help">
                                    <el-skeleton :rows="8" animated />
                                </div>
                                <div v-else-if="helpContent && helpContent.length > 0" class="help-content" v-html="helpContent"></div>
                                <div v-else class="default-help">
                                    <el-alert 
                                        type="info" 
                                        :closable="false"
                                        style="margin-bottom: 20px;">
                                        <template #default>
                                            <strong>æç¤ºï¼š</strong>æ­£åœ¨æ˜¾ç¤ºé»˜è®¤ä½¿ç”¨è¯´æ˜ã€‚ç®¡ç†å‘˜å¯åœ¨åå°ä¸Šä¼ è‡ªå®šä¹‰å¸®åŠ©æ–‡æ¡£ã€‚
                                        </template>
                                    </el-alert>
                                    <div class="help-section">
                                        <h3>ğŸ« ä»€ä¹ˆæ˜¯å…‘æ¢ç ï¼Ÿ</h3>
                                        <p>å…‘æ¢ç æ˜¯æ‚¨åŠ å…¥ChatGPTå›¢é˜Ÿçš„é€šè¡Œè¯ï¼Œæ¯ä¸ªå…‘æ¢ç å¯¹åº”ä¸€ä¸ªå›¢é˜Ÿå¸­ä½ã€‚</p>
                                    </div>
                                    <div class="help-section">
                                        <h3>ğŸ”„ è§£ç»‘åŠŸèƒ½è¯´æ˜</h3>
                                        <p><strong>è´¨ä¿å‹å¡å¯†ï¼š</strong>è§£ç»‘åå¯ä»¥é‡æ–°ä½¿ç”¨ï¼Œé€‚åˆéœ€è¦æ›´æ¢é‚®ç®±çš„ç”¨æˆ·ã€‚</p>
                                        <p><strong>ä¸€æ¬¡æ€§å¡å¯†ï¼š</strong>ä»…åœ¨æ¯å·æ´»è·ƒæ—¶å¯è§£ç»‘é‡ç”¨ï¼Œæ¯å·å°ç¦åæ— æ³•è§£ç»‘ã€‚</p>
                                    </div>
                                    <div class="help-section">
                                        <h3>ğŸ›¡ï¸ è´¨ä¿æœåŠ¡</h3>
                                        <p>è´¨ä¿å‹å¡å¯†æä¾›è´¨ä¿æœŸä¿éšœï¼Œæ¯å·å¤±æ•ˆæ—¶å¯ç”³è¯·å…è´¹æ›¿æ¢ï¼Œç¡®ä¿æ‚¨çš„å›¢é˜Ÿè®¿é—®æƒé™ã€‚</p>
                                    </div>
                                    <div class="help-section">
                                        <h3>ğŸ“§ ä½¿ç”¨æµç¨‹</h3>
                                        <ol>
                                            <li>åœ¨"å…‘æ¢"é¡µé¢è¾“å…¥å…‘æ¢ç å’Œé‚®ç®±</li>
                                            <li>ç­‰å¾…ç³»ç»Ÿå‘é€å›¢é˜Ÿé‚€è¯·é‚®ä»¶</li>
                                            <li>æŸ¥æ”¶é‚®ç®±å¹¶æ¥å—å›¢é˜Ÿé‚€è¯·</li>
                                            <li>å¼€å§‹ä½¿ç”¨ChatGPTå›¢é˜ŸåŠŸèƒ½</li>
                                        </ol>
                                    </div>
                                    <div class="help-section">
                                        <h3>â“ å¸¸è§é—®é¢˜</h3>
                                        <p><strong>Q: æ²¡æ”¶åˆ°é‚€è¯·é‚®ä»¶æ€ä¹ˆåŠï¼Ÿ</strong><br>
                                        A: è¯·æ£€æŸ¥åƒåœ¾é‚®ç®±ï¼Œæˆ–è”ç³»å®¢æœé‡æ–°å‘é€é‚€è¯·ã€‚</p>
                                        <p><strong>Q: å¯ä»¥æ›´æ¢é‚®ç®±å—ï¼Ÿ</strong><br>
                                        A: è´¨ä¿å‹å¡å¯†æ”¯æŒè§£ç»‘é‡ç”¨ï¼Œä¸€æ¬¡æ€§å¡å¯†éœ€æ¯å·æ´»è·ƒæ‰èƒ½è§£ç»‘ã€‚</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </el-tab-pane>
            </el-tabs>
        </div>
    </div>

    <!-- ä¾èµ–è„šæœ¬ -->
    <script src="https://cdn.jsdelivr.net/npm/vue@3.3.4/dist/vue.global.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/element-plus@2.3.7/dist/index.full.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/element-plus@2.3.7/dist/locale/zh-cn.js"></script>
    
    <!-- é…ç½®æ–‡ä»¶ -->
    <script src="config/api-config.js"></script>
    
    <!-- åº”ç”¨è„šæœ¬ -->
    <script src="assets/js/api.js"></script>
    <script src="assets/js/main.js"></script>
    
</body>
</html>